(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"5P3j":function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),i=n.n(a),s=n("/MKj"),r=n("ANjH"),l=n("nd+Z"),c=n("SUMQ"),o=n("6ZaM"),h=n.n(o),p=n("YDiY"),d=n.n(p),u=n("Mx+2"),m=n.n(u),g=n("IPLq"),k=n.n(g),v=n("Ndn5"),b=n.n(v);var f=Object(c.withStyles)(()=>({root:{display:"block",maxWidth:500,height:120,marginTop:15,marginBottom:0,cursor:"pointer",textDecoration:"none"},card:{maxWidth:500,marginTop:10,marginBottom:10,cursor:"pointer",userSelect:"none"},selected:{border:"3px #c6edef solid"},image:{boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",height:110},force:{paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0}}))(function(e){const{classes:t,onClick:n,selected:a}=e,{title:s,images:r}=e.event,{owner:l,date:c}=e.ticket;return i.a.createElement(k.a,{className:t.card,onClick:n},i.a.createElement(b.a,{className:a?t.selected:"",avatar:i.a.createElement("div",{className:t.image},i.a.createElement("img",{height:110,src:r[0]||"https://vignette.wikia.nocookie.net/dragonballfanon/images/7/70/Random.png/revision/latest?cb=20161221030547"})),title:s,subheader:`${l} - ${c.getDate()}/${c.getMonth()}/${c.getFullYear()}`,action:a?i.a.createElement(m.a,null):null}))}),E=n("2VVu"),S=n.n(E),x=n("1OZW"),C=n.n(x),w=n("aI6E"),T=n.n(w),y=n("12gN"),N=n.n(y),I=n("WsSU"),B=n.n(I),G=n("RuPx");function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=Object(c.withStyles)(()=>({}))(class extends i.a.Component{constructor(e){super(e),U(this,"handleCancel",()=>{this.setState({value:""})}),U(this,"handleKeyUp",e=>{(13===e.charCode||"Enter"===e.key)&&this.handleRequestSearch()}),U(this,"handleChange",e=>{this.setState({value:e.target.value})}),U(this,"handleRequestSearch",()=>{this.props.onRequestSearch(this.state.value.trim(),null)}),this.state={value:""}}render(){const{classes:e}=this.props;return i.a.createElement(G.a,{variant:"black",inputProps:{value:this.state.value,onChange:this.handleChange,onKeyUp:this.handleKeyUp,className:e.input,disableUnderline:!1},onRightDrawerToggle:this.props.onRightDrawerToggle,handleCancel:this.handleCancel,handleRequestSearch:this.handleRequestSearch})}});function R(){return(R=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const q=["Select a ticket to GET","Select a ticket to GIVE","Confirmation"];t.default=Object(s.b)(function(e){return{tickets:e.tickets,users:e.users,events:e.events}},function(e){return Object(r.b)({trade:l.e},e)})(Object(c.withStyles)(e=>({ticketExchange:{},title:{textAlign:"center"},button:{marginRight:e.spacing.unit},instructions:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit},appBar:{top:"auto",bottom:0,zIndex:20},toolbar:{margin:"auto"},margin:{margin:30},iconBigger:{fontSize:30},labelBigger:{fontSize:16}}))(class extends i.a.Component{constructor(e){super(e),O(this,"next",()=>{this.setState(e=>({text:"",step:e.step+1}),()=>{3===this.state.step&&this.props.trade({ticket1:this.state.desiredTicket,ticket2:this.state.ticketToGive})})}),O(this,"back",()=>{this.setState(e=>({step:0===e.step?0:e.step-1}))}),O(this,"reset",()=>{this.setState({step:0,desiredTicket:null,ticketToGive:null})}),O(this,"printGet",()=>{const e=this.props.users.loggedInUser.username;return this.props.tickets.map(t=>{if(t.owner===e)return null;const n=this.props.events.find(e=>e.id===t.eventId);return n.title.toUpperCase().includes(this.state.text.toUpperCase())?i.a.createElement("div",{key:t.ticketId},i.a.createElement(f,{event:n,ticket:t,selected:this.state.desiredTicket===t,onClick:()=>this.setState({desiredTicket:t})})):null}).filter(Boolean)}),O(this,"printGive",()=>{const e=this.props.users.loggedInUser.username;return this.props.tickets.map(t=>{if(t.owner!==e)return null;const n=this.props.events.find(e=>e.id===t.eventId);return n.title.toUpperCase().includes(this.state.text.toUpperCase())?i.a.createElement("div",{key:t.ticketId},i.a.createElement(f,{event:n,ticket:t,selected:this.state.ticketToGive===t,onClick:()=>this.setState({ticketToGive:t})})):null}).filter(Boolean)}),O(this,"printConfirm",()=>{const{desiredTicket:e,ticketToGive:t}=this.state,n=this.props.events.find(e=>e.id===t.eventId),a=this.props.events.find(t=>t.id===e.eventId);return i.a.createElement("div",null,i.a.createElement(h.a,null,"Are you sure you want to trade this ticket:"),i.a.createElement(f,{event:n,ticket:t}),i.a.createElement(h.a,null,"For this ticket:"),i.a.createElement(f,{event:a,ticket:e}))}),O(this,"finished",()=>i.a.createElement(h.a,null,"All steps completed - trade completed!")),O(this,"printStep",e=>e.length?e:i.a.createElement(h.a,null,"No results found for query: ",this.state.text)),O(this,"getStepContent",e=>0===e?this.printStep(this.printGet()):1===e?this.printStep(this.printGive()):2===e?this.printConfirm():"Unknown step"),this.state={text:"",step:0,desiredTicket:null,ticketToGive:null}}render(){const{classes:e}=this.props,t=this.state.step;return i.a.createElement("div",null,i.a.createElement("div",{className:e.title},i.a.createElement(h.a,{variant:"h4",color:"inherit"},"Ticket Exchange")),i.a.createElement(T.a,{activeStep:t,alternativeLabel:!0},q.map(t=>{const n={StepIconProps:{classes:{root:e.iconBigger}},classes:{label:e.labelBigger}};return i.a.createElement(N.a,R({key:t},{}),i.a.createElement(B.a,n,t))})),i.a.createElement(j,{onRequestSearch:e=>this.setState({text:e})}),i.a.createElement("div",{className:e.margin},t===q.length?this.finished():this.getStepContent(t)),i.a.createElement(d.a,{position:"fixed",color:"default",className:e.appBar},i.a.createElement(S.a,{className:e.toolbar},t===q.length?i.a.createElement(C.a,{onClick:this.reset,className:e.button},"Make new trade"):i.a.createElement(i.a.Fragment,null,i.a.createElement(C.a,{disabled:0===t,onClick:this.back,className:e.button},"Back"),i.a.createElement(C.a,{variant:"contained",color:"primary",disabled:!this.state.desiredTicket||1===t&&!this.state.ticketToGive,onClick:this.next,className:e.button},t===q.length-1?"Finish":"Next")))))}}))}}]);